/*  Tash! Reactive JavaScript Library, version 0.0.1
 *  (c) 2011-2012 Davide A. Molin
 *
 * Tash! is freely distributable and released under the MIT, BSD, and GPL Licenses.
 *
 *--------------------------------------------------------------------------*/
window.tash=window.tash||{};(function(c){c.version={major:0,minor:0,sub:1};c.config={namespaceRoot:"",namespaceEventsRoot:""};c.namespace=function(d,h){var g,f=d,e=0;if(typeof d=="string"){h=(c.config.namespaceRoot?c.config.namespaceRoot+".":"")+d;f=window}g=!h?"":h.split(".");for(e in g){if(g.hasOwnProperty(e)){if(typeof f[g[e]]==="undefined"){f[g[e]]={}}f=f[g[e]]}}return f};c.isArray=(typeof Array.isArray==="function"?Array.isArray:function a(d){return d!==undefined&&Object.prototype.toString.call(d).match(/Array/)!==null});c.addToArray=function(f,e){var d=0;if(!c.isArray(f)){return d}if(c.isArray(f)){c.each(e,function(h,g){f.push(h);d++})}else{f.push(e);d++}return d};c.each=function b(g,d,f){var e;if(!c.isArray(g)){return}for(e in g){if(g.hasOwnProperty(e)){if(d.call((f?f:g[e]),g[e],e)===false){break}}}};c.util={template:function(e,h){var f,g=e.match(/\{\{(\w+)\}\}/g);if(g){for(f=0;f<g.length;f+=1){var d=g[f];if(d.charAt(0)!=="{"){return}e=e.replace(d,h[d.substr(2,d.length-4)]||d)}}return e},trimAt:function(e,d){if(e&&e.length&&e.length>d){e=e.substr(0,d-3)+"..."}return e},isDefined:function(g){var f=g.split("."),e=window,d;for(d in f){if(f.hasOwnProperty(d)){if(typeof e[f[d]]==="undefined"){return false}e=e[f[d]]}}return true},mixin:function(e,f){var d,g;for(g in f){if(f.hasOwnProperty(g)){if(typeof e[g]==="function"){e[g].parent=f[g]}else{e[g]=f[g]}}}return e}}}(window.tash));if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){if(this===void 0||this===null){throw new TypeError()}var d=[].concat(this);var a=d.length>>>0;if(a===0){return -1}var e=0;if(arguments.length>0){e=Number(arguments[1]);if(e!==e){e=0}else{if(e!==0&&e!==Infinity&&e!==-Infinity){e=(e>0||-1)*Math.floor(Math.abs(e))}}}if(e>=a){return -1}var b=e>=0?e:Math.max(a-Math.abs(e),0);for(;b<a;b++){if(b in d&&d[b]===c){return b}}return -1}}(function(e){e.namespace(e,"events");var d={};function c(g,f){if(!d[g]){return}e.each(d[g],function(i,h){i.callback.apply(i.scope,f||[])})}function b(f,h,g){if(!f||typeof h!=="function"){return false}if(!d[f]){d[f]=[]}d[f].push({callback:h,scope:(g?g:e)});return[f,h]}function a(g){var f;if(typeof g==="undefined"||!e.isArray(g)){return}f=g[0];if(d[f]){e.each(d[f],function(i,h){if(i==g[1]){d[f].splice(h,1)}})}}e.events.require=function(f){var h=e.config.namespaceEventsRoot||e.config.namespaceRoot,g;if(!f||f.length===0){return}h+=h?(f.charAt(0)==="."?f:"."+f):f;g=e.namespace(h);if(typeof g.publish==="function"){return g}g.publish=function(i){c(f,(e.isArray(i)?i:[i]))};g.subscribe=function(j,i){return b(f,j,i)};g.unsubscribe=function(i){return a(i)};return g}}(tash));